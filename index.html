<!DOCTYPE html>
<html>
<head>
	<style type="text/css">
		p.bottommargin {margin-bottom: 1cm}
	</style>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>空气刘海</title>
</head>
<body>
<!-- <h1>Hello World</h1> -->
<!-- <p>I'm hosted with GitHub Pages.</p> -->
<h1>HTTP 的长连接和短连接</h1>
<h3><a href="https://www.zhihu.com/question/19997004/answer/14600670">为什么很多网站的内容储存用别的域名？有什么好处？</a></h3>

<h4>Answer: </h4>
<p>作者：杜传赢</p>
<p>来源：知乎</p>
<p class="bottommargin">著作权归作者所有，转载请联系作者获得授权。</p>

<p>三个最主流的原因: </p>
<p>1. CDN 缓存更方便</p>
<p>2. 突破浏览器并发限制 (你随便挑一个 G家的 <a href="https://lh4.googleusercontent.com/-si4dh2myPWk/T81YkSi__AI/AAAAAAAAQ5o/LlwbBRpp58Q/w497-h373/IMG_20120603_163233.jpg">url</a>, 把前面的 lh4 换成 lh3, lh6 啥的，都照样能够访问，像地图之类的需要大量并发下载图片的站点，这个非常重要。)</p>
<p>3. Cookieless, 节省带宽，尤其是上行带宽 一般比下行要慢。。。</p>

<p>还有另外两个非常规原因: </p>
<p>4. 对于 UGC 的内容和主站隔离，防止不必要的安全问题( 上传 js 窃取主站 cookie 之类的) 。 </p>
<p>正是这个原因要求用户内容的域名必须不是自己主站的子域名，而是一个完全独立的第三方域名。</p>

<p>5. 数据做了划分，甚至切到了不同的物理集群，通过子域名来分流比较省事。这个可能被用的不多。</p>

<p>PS: 关于 Cookie 的问题，带宽是次要的，安全隔离才是主要的。</p>
<p>关于多域名，也不是越多越好，虽然服务器端可以做泛解释，浏览器做 dns 解释也是耗时间的，而且太多域名，如果要走 https 的话，还有要多买证书和部署的问题。</p>
<p></p>
<p></p>
<p></p>
</body>
</html>
